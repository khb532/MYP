# Codex CLI Slash Commands

이 문서는 Codex CLI의 슬래시 명령어와 동작 방식을 요약한 자료입니다. 현재 릴리스 빌드(v0.42 계열)를 기준으로 하며, 향후 업데이트로 항목이 추가·변경될 수 있습니다.

## 명령어 요약

| 명령어      | 진행 중 작업에서 사용 가능 | 주요 기능 |
| ----------- | -------------------------- | --------- |
| `/model`    | ✕                          | 모델 프리셋(모델 + Reasoning Effort) 선택 팝업을 엽니다. |
| `/approvals` | ✕                          | 승인 정책과 샌드박스 모드를 동시에 바꾸는 팝업을 엽니다. |
| `/review`    | ✕                          | 코드 리뷰 모드를 선택하는 팝업(브랜치, 커밋, 변경분 등)을 엽니다. |
| `/new`       | ✕                          | 현재 CLI 세션 안에서 새 대화를 시작합니다. |
| `/init`      | ✕                          | AGENTS.md 생성을 위한 프롬프트를 자동으로 제출합니다. |
| `/compact`   | ✕                          | 대화를 요약해 컨텍스트를 비우고 토큰 사용량 표시를 초기화합니다. |
| `/undo`¹     | ✕                          | 마지막 고스트 스냅샷으로 워크스페이스를 롤백합니다. |
| `/diff`      | ○                          | 현재 Git 변경 사항(추적 + 미추적)을 컬러 diff로 출력합니다. |
| `/mention`   | ○                          | 채팅 입력란에 `@`를 삽입하여 파일 검색 팝업을 즉시 엽니다. |
| `/status`    | ○                          | 모델·승인 모드·토큰 사용량·세션 ID 등을 카드 형태로 보여줍니다. |
| `/mcp`       | ○                          | 등록된 MCP 서버/툴 목록을 출력하거나, 없음 메시지를 보여줍니다. |
| `/logout`    | ✕                          | Codex 계정에서 로그아웃하고 CLI를 종료합니다. |
| `/quit`      | ○                          | Codex CLI를 종료합니다. |

¹ `/undo`는 `BETA_FEATURE` 환경 변수가 설정된 경우에만 명령 목록에 표시됩니다.

## 세부 설명

### `/model`
- `codex_common::model_presets::builtin_model_presets`에서 인증 상태에 맞는 모델 프리셋을 불러옵니다.
- 선택 시 `OverrideTurnContext` 오퍼레이션을 전송하고, 모델/Reasoning Effort를 즉시 적용·영구 저장합니다.
- 작업 실행 중에는 호출할 수 없습니다.
- **하위 프리셋**(codex-rs/common/src/model_presets.rs:19):
  | 라벨              | 모델 슬러그     | Reasoning Effort | 설명 요약 |
  | ----------------- | --------------- | ---------------- | --------- |
  | `gpt-5-codex low` | `gpt-5-codex`   | Low              | Codex 전용 모델, 빠른 응답 |
  | `gpt-5-codex medium` | `gpt-5-codex` | Medium           | Codex 전용 기본값 |
  | `gpt-5-codex high` | `gpt-5-codex`  | High             | Codex 전용, 심화 추론 |
  | `gpt-5 minimal`   | `gpt-5`         | Minimal          | 가장 빠른 일반 모델 |
  | `gpt-5 low`       | `gpt-5`         | Low              | 빠른 처리 + 기본 추론 |
  | `gpt-5 medium`    | `gpt-5`         | Medium           | 권장 기본값 |
  | `gpt-5 high`      | `gpt-5`         | High             | 복잡한 요구 사항 최적화 |

### `/approvals`
- 승인 정책(`AskForApproval`)과 샌드박스 정책(`SandboxPolicy`)을 묶은 프리셋 목록을 표시합니다.
- 선택하면 현재 턴뿐 아니라 이후 턴에도 적용되도록 설정을 저장합니다.
- 작업 실행 중에는 사용할 수 없습니다.
- **하위 프리셋**(codex-rs/common/src/approval_presets.rs:15):
  | 라벨         | Approval Policy        | Sandbox Policy         | 동작 |
  | ------------ | ---------------------- | ---------------------- | ---- |
  | `Read Only`  | `OnRequest`            | `ReadOnly`             | 읽기 전용, 모든 수정/커맨드는 승인 필요 |
  | `Auto`       | `OnRequest`            | `WorkspaceWrite`       | 워크스페이스 내 수정·명령은 자동, 외부/네트워크는 승인 필요 |
  | `Full Access`| `Never`                | `DangerFullAccess`     | 승인 없이 모든 작업 허용 (위험) |

### `/review`
- 브랜치 비교, 현재 변경분, 특정 커밋, 커스텀 지시 등 4가지 리뷰 프리셋을 제공합니다.
- 선택된 옵션에 따라 `Op::Review`를 전송하거나 추가 선택 팝업(브랜치/커밋 선택)을 띄웁니다.
- **하위 옵션**(codex-rs/tui/src/chatwidget.rs:1783):
  | 옵션 라벨                     | 동작 |
  | ----------------------------- | ---- |
  | `Review against a base branch`| 현재 브랜치와 선택한 대상 브랜치를 비교; 후속 팝업에서 로컬 브랜치 목록이 표시되고 선택 시 해당 브랜치 기준 diff 리뷰를 요청 |
  | `Review uncommitted changes`  | 스테이징 여부와 무관하게 워크스페이스 수정분 전체 리뷰 요청 |
  | `Review a commit`             | 커밋 선택 팝업을 띄워 특정 커밋 리뷰를 요청 |
  | `Custom review instructions`  | 사용자 지정 프롬프트 입력창을 열어 맞춤 리뷰 요청 |

### `/new`
- 현재 설정(모델, 승인, 샌드박스, workdir)을 유지한 채로 `ChatWidget`을 새 인스턴스로 재구성합니다.
- 기존 대화 내역은 history 패널에 남지만, 이후 메시지는 새 대화로 분리됩니다.
- 하위 명령 없음.

### `/init`
- `prompt_for_init_command.md`에 정의된 템플릿을 그대로 제출하여 AGENTS.md 초안을 작성하도록 Codex에 요청합니다.
- 저장 경로, 내용 편집은 사용자 확인 후 진행합니다.
- 하위 명령 없음.

### `/compact`
- Codex에게 대화 요약(`Op::Compact`)을 지시하고, UI에 누적 토큰 사용량을 초기화합니다.
- 컨텍스트 한계에 다다르기 전에 대화 내용을 압축하고 싶을 때 사용합니다.
- 하위 명령 없음.

### `/undo`
- 사용자 메시지를 보낼 때마다 생성한 Git 고스트 커밋을 역순으로 복원합니다.
- Git 리포지터리 외부에서는 자동으로 비활성화되며, 실패 시 스냅샷 기능이 꺼집니다.
- 베타 플래그(`BETA_FEATURE`)가 없으면 명령 팝업에 노출되지 않습니다.
- 하위 명령 없음.

### `/diff`
- `git diff --color` 결과와 미추적 파일에 대한 `git diff --no-index` 출력을 결합해 보여줍니다.
- Git 리포지터리가 아닐 경우 “not inside a git repository” 메시지를 출력합니다.
- 하위 명령 없음.

### `/mention`
- 채팅 입력란에 `@`를 입력한 것과 동일하게 동작하며, 파일 검색 팝업이 열립니다.
- 검색 결과에서 Enter/Tab으로 경로를 삽입할 수 있습니다.
- 하위 명령 없음.

### `/status`
- 현재 모델, 승인/샌드박스 모드, 작업 디렉터리, 세션 ID, AGENTS 적용 상태, 토큰/컨텍스트 사용량, 레이트리밋 정보를 카드 형태로 제공합니다.
- Codex CLI 버전과 계정 정보도 함께 표시됩니다.
- 하위 명령 없음.

### `/mcp`
- MCP 서버가 구성된 경우 `Op::ListMcpTools`를 전송해 툴 목록을 표 형식으로 보여줍니다.
- 서버가 없으면 문서 링크와 함께 “No MCP servers configured.” 안내를 출력합니다.
- 하위 명령 없음 (목록은 서버 설정에 따라 동적으로 출력).

### `/logout`
- 로컬 인증 정보를 삭제(`codex_core::auth::logout`)한 뒤 CLI를 종료합니다.
- 재실행 시 로그인 절차를 다시 밟아야 합니다.
- 하위 명령 없음.

### `/quit`
- 현재 작업 중이라도 즉시 Codex CLI를 종료합니다.
- 하위 명령 없음.

## 기타 슬래시 엔트리

- **디버그 전용**: 개발 빌드에서는 `/test-approval` 명령이 노출되어 승인 요청 UI를 테스트할 수 있습니다. 배포 바이너리에는 포함되지 않습니다.
- **커스텀 프롬프트**: 서버가 제공하는 사용자 정의 프롬프트는 `/prompts:<이름>` 형식으로 추가됩니다. 인자 전달은 `KEY=VALUE` 형태를 지원하며, 필요 인자는 프롬프트 정의에 따라 다릅니다. 예) `/prompts:daily-review TARGET=EngineModule`.

## 활용 팁

- 슬래시 명령 팝업은 입력 창에서 `/` 입력 시 열리며, 검색어를 입력해 빠르게 필터링할 수 있습니다.
- 작업 실행 중에는 `/diff`, `/mention`, `/status`, `/mcp`, `/quit`만 허용됩니다. 다른 명령은 작업이 끝난 뒤 다시 시도해야 합니다.
- 베타 기능을 체험하려면 Codex CLI 실행 전 `BETA_FEATURE=1` 환경 변수를 설정한 뒤 `/undo`를 사용하세요.

_________________________________________________________
_________________________________________________________


# AGENTS 지침 반영 방법

이 절은 루트 AGENTS.md에 정의된 레포지터리 지침을 Codex 에이전트가 일관되게 준수하도록 돕는 요약 가이드입니다.

## 적용 순서
- 현재 작업 디렉터리에서 가장 가까운 AGENTS.md를 찾고, 하위 디렉터리에 따로 문서가 없으면 상위 문서 규칙을 그대로 따른다.
- Codex CLI에 작업 지침을 로드할 때는 시스템 → 개발자 → AGENTS 순으로 우선순위를 명시하고, 레포 고유 규칙만 간결히 정리해 전달한다.
- 다른 경로로 이동하거나 역할이 바뀌기 전에 최신 AGENTS.md를 다시 확인해 변경 사항을 반영한다.

## AGENTS.md 작성 모범 사례

- **목적 정의**: 파일이 누구를 대상으로 어떤 행동을 요구하는지 맨 앞에서 명확히 밝힙니다.
- **환경 요약**: 프로젝트명, 엔진/플랫폼 버전, 필수 툴 등 기본 정보를 한 섹션으로 묶어 빠르게 파악할 수 있게 합니다.
- **작업 범위와 우선순위**: 허용/금지 파일과 필수 테스트 여부 등 실무에 바로 필요한 규칙을 위쪽에 배치합니다.
- **컨벤션·스타일**: 네이밍, 로그 카테고리, 파일 배치 규칙을 구체적 예시와 함께 정리해 혼동을 줄입니다.
- **빌드·테스트 지침**: 빌드 구성, 명령어, 테스트 실행 방법을 명시해 반복 작업을 재현하기 쉽게 합니다.
- **커뮤니케이션 규칙**: 응답 언어, 톤, 결과 정리 방식처럼 협업 품질을 좌우하는 항목을 명확히 정의합니다.
- **에스컬레이션/승인 흐름**: 권한 요청이나 위험 작업 절차를 단계별로 설명하고, 금지 항목은 눈에 띄도록 표시합니다.
- **갱신 정책**: 문서 변경 권한, 시점, 이력 관리 방식을 소개해 지침의 신뢰성과 최신성을 유지합니다.

문단과 리스트를 적절히 섞어 항목별로 간결하게 정리하고, 꼭 필요한 경우에만 예시 코드나 명령어를 넣으면 실무에서 바로 참고할 수 있는 AGENTS.md가 완성됩니다.
